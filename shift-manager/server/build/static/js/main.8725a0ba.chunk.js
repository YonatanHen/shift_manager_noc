(this["webpackJsonpshift-manager"]=this["webpackJsonpshift-manager"]||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},214:function(e,t,n){},218:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(20),s=n.n(c),i=(n(146),n(147),n(28)),o=n(10),l=n(9),u=n(16),j=n(8),d=n.n(j),b=n(15),h=n(19),f=n.n(h),O=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"set_user",user:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.get("/getusers").then((function(e){t({type:"get_users",list:e.data})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.get("/getreports").then((function(e){t({type:"get_reports",reports:e.data})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({type:"set_alerts",alertsData:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e,t){return function(){var n=Object(b.a)(d.a.mark((function n(r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f.a.put("/add-comment",{reportId:e,comment:t}).then((function(e){r({type:"add_comment"})})).catch((function(e){console.log(e)}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},v=n(31),y=n(54),w=n(2),C={setUser:O},S=Object(l.b)((function(e){return{}}),C)((function(e){var t=Object(v.d)(),n=t.authState,r=t.oktaAuth,a=(t.authService,Object(u.f)());if(n.isAuthenticated||a.push("/login"),n.isPending)return Object(w.jsx)("div",{children:"Loading, Please reload..."});n.isAuthenticated&&(a.push("/protected"),r.getUser().then((function(t){console.log(t),e.setUser(t),sessionStorage.setItem("email",t.email),localStorage.setItem("name",t.name)})));var c=n.isAuthenticated?Object(w.jsx)("button",{onClick:function(){r.signOut()},children:"Logout"}):Object(w.jsx)("button",{onClick:function(){a.push("/login")},children:"Login"});return Object(w.jsxs)("div",{children:[Object(w.jsx)(i.b,{to:"/",children:"Home"}),Object(w.jsx)("br",{}),Object(w.jsx)(i.b,{to:"/protected",children:"Protected"}),Object(w.jsx)("br",{}),c]})})),D=n(11),k=n.p+"static/media/noclogo.a1df0659.png",A=n(51),N=n(94),U=n(77),I=n(138),R=n(139),T=n(41),E=n(263),F=n(264),H=n(126),M=n(265),L=n(268),_=n(128),B={addShift:function(e,t,n){return function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.post("/add-shift",{title:localStorage.getItem("name"),start:t,end:n}).then((function(e){f.a.get("/get-shifts").then((function(e){console.log("new data"),console.log(e.data),r({type:"get_shifts",shifts:e.data})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},P={marginBottom:5},G=Object(l.b)((function(e){return{user:e.User}}),B)((function(e){var t=function(t){"start date"===t.target.name?e.inputHandler(Object(o.a)(Object(o.a)({},e.input),{},{start:t.target.value})):e.inputHandler(Object(o.a)(Object(o.a)({},e.input),{},{end:t.target.value}))},n=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.input.start&&""!==e.input.end){t.next=4;break}alert("Add start & end datetime"),t.next=12;break;case 4:return t.next=6,e.setIsLoading(!0);case 6:return t.next=8,e.addShift(e.user,e.input.start,e.input.end);case 8:return t.next=10,e.displayDialogHandler(!1);case 10:return t.next=12,e.setIsLoading(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(E.a,{style:{width:"100%"},children:[Object(w.jsx)(F.a,{style:P,children:Object(w.jsxs)(H.a,{children:["Start Date ","&"," Hour:"]})}),Object(w.jsx)(F.a,{style:P,children:Object(w.jsx)(H.a,{children:Object(w.jsx)(M.a,{className:"mb-3",children:Object(w.jsx)(L.a.Control,{type:"datetime-local",value:e.input.start,name:"start date",onChange:t,required:!0})})})}),Object(w.jsx)(F.a,{style:P,children:Object(w.jsxs)(H.a,{children:["End Date ","&"," Hour:"]})}),Object(w.jsx)(F.a,{style:P,children:Object(w.jsx)(H.a,{children:Object(w.jsx)(M.a,{className:"mb-3",children:Object(w.jsx)(L.a.Control,{type:"datetime-local",name:"end date",onChange:t,required:!0})})})}),Object(w.jsx)(F.a,{children:Object(w.jsx)(H.a,{children:Object(w.jsx)(_.a,{variant:"outline-secondary",id:"button-addon2",onClick:n,type:"submit",children:"Add shift"})})})]})})})),V={getShifts:function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.get("/get-shifts").then((function(e){console.log("new data"),console.log(e.data),t({type:"get_shifts",shifts:e.data})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteShift:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.a.delete("/delete-shift/".concat(e)).then((function(e){f.a.get("/get-shifts").then((function(e){console.log("new data"),console.log(e.data),n({type:"get_shifts",shifts:e.data})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},W=Object(l.b)((function(e){return{shifts:e.Shifts}}),V)((function(e){var t=Object(r.useState)(!1),n=Object(D.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)({start:"",end:""}),i=Object(D.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)(!1),h=Object(D.a)(j,2),f=h[0],O=h[1];Object(r.useEffect)(Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getShifts();case 2:case"end":return t.stop()}}),t)}))),[u,l,e.deleteShift,e.getShifts,e.shifts,N.a]);return Object(w.jsxs)(w.Fragment,{children:[f?Object(w.jsx)("h1",{children:"loading..."}):Object(w.jsx)(N.a,{events:e.shifts,initialView:"dayGridMonth",plugins:[U.b,I.a,R.a],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,dateClick:function(e){u(Object(o.a)(Object(o.a)({},l),{},{start:e.dateStr+"T00:00"})),c(!0)},eventClick:function(t){window.confirm("Are you sure that you want to delete this shift?")&&(O(!0),e.deleteShift(t.event.extendedProps._id),O(!1))}}),Object(w.jsx)(T.Dialog,{visible:a,onHide:function(){return c(!1)},children:Object(w.jsx)(G,{input:l,inputHandler:u,displayDialogHandler:c,setIsLoading:O})})]})})),q=Object(l.b)((function(e){return{shifts:e.Shifts}}),{})((function(e){return Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"m-5",children:Object(w.jsx)(W,{})?Object(w.jsx)(W,{}):Object(w.jsx)(A.Skeleton,{width:"100rem",height:"50rem"})})})})),J=n(43),Y=n(26),Q=n(37),Z=n(129),$=n(33),z=n(130);var K={getUsers:g},X=Object(l.b)((function(e){return{users:e.Users}}),K)((function(e){var t,n=Object(r.useState)(""),a=Object(D.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(D.a)(i,2),l=o[0],u=o[1],j=Object(r.useState)(""),d=Object(D.a)(j,2),b=d[0],h=d[1],O=Object(r.useState)(""),g=Object(D.a)(O,2),p=g[0],x=g[1],m=Object(w.jsx)(Q.Button,{label:"Add User",className:"p-button-secondary",onClick:function(e){return t.toggle(e)}}),v=function(t){f.a.post("/deleteuser",t).then((function(t){console.log(t),e.getUsers()})).catch((function(e){console.log(e)}))},y=function(){return Object(w.jsx)(A.Skeleton,{width:"2rem"})};return Object(w.jsxs)("div",{children:[Object(w.jsxs)(z.OverlayPanel,{ref:function(e){return t=e},children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("div",{className:"p-2",children:Object(w.jsx)($.InputText,{value:c,placeholder:"User Name",onChange:function(e){return s(e.target.value)}})}),Object(w.jsx)("div",{className:"p-2",children:Object(w.jsx)($.InputText,{value:l,placeholder:"Full Name",onChange:function(e){return u(e.target.value)}})}),Object(w.jsx)("div",{className:"p-2",children:Object(w.jsx)($.InputText,{value:b,placeholder:"Email",onChange:function(e){return h(e.target.value)}})}),Object(w.jsx)("div",{className:"p-2",children:Object(w.jsx)($.InputText,{value:p,placeholder:"PagerDuty ID",onChange:function(e){return x(e.target.value)}})})]}),Object(w.jsx)("div",{className:"text-center",children:Object(w.jsx)(Q.Button,{label:"Add",className:"p-button-secondary",onClick:function(){f.a.post("/adduser",{username:c,email:b,pdid:p,fullname:l}).then((function(n){console.log(n),e.getUsers(),t.toggle()})).catch((function(e){console.log(e)}))}})})]}),Object(w.jsx)(Z.Toolbar,{left:m}),Object(w.jsxs)(J.DataTable,{value:e.users,children:[Object(w.jsx)(Y.Column,{field:"fullname",header:"Name",body:y}),Object(w.jsx)(Y.Column,{field:"username",header:"User Name",body:y}),Object(w.jsx)(Y.Column,{field:"pdid",header:"PagerDuty ID",body:y}),Object(w.jsx)(Y.Column,{body:function(e){return Object(w.jsx)(Q.Button,{icon:"pi pi-times",className:"p-button-rounded p-button-danger",onClick:function(){return v(e)}})}})]})]})})),ee=n(90),te=n(266),ne=n(137),re=(n(211),{setAlerts:x}),ae={marginBottom:5},ce=Object(l.b)((function(e){return{alerts:e.alertsData}}),re)((function(e){var t=Object(r.useState)(e.row),n=Object(D.a)(t,2),a=n[0],c=n[1],s=function(e){"title"===e.target.name?c(Object(o.a)(Object(o.a)({},a),{},{title:e.target.value})):c(Object(o.a)(Object(o.a)({},a),{},{content:e.target.value,time:(new Date).getHours().toString()+":"+(new Date).getMinutes().toString()+":"+(new Date).getSeconds().toString()}))};return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(E.a,{style:{width:"100%"},children:[Object(w.jsx)("h1",{children:"Edit/Delete Report"}),Object(w.jsx)(F.a,{style:ae,children:Object(w.jsx)(H.a,{children:"Title:"})}),Object(w.jsx)(F.a,{style:ae,children:Object(w.jsx)(M.a,{children:Object(w.jsx)(L.a.Control,{as:"textarea",name:"title",style:{height:120},onChange:s,value:a.title})})}),Object(w.jsx)(F.a,{style:ae,children:Object(w.jsx)(H.a,{children:"Info:"})}),Object(w.jsx)(F.a,{style:ae,children:Object(w.jsx)(M.a,{children:Object(w.jsx)(L.a.Control,{as:"textarea",name:"content",style:{height:100},onChange:s,value:a.content})})}),Object(w.jsxs)(F.a,{style:ae,children:[Object(w.jsx)(_.a,{onClick:function(){var t=e.alerts.find((function(t){return e.row.id===t.id}));e.setAlerts(e.alerts.map((function(e){if(e.id===t.id)return a}))),e.displayDialogHandler(!1)},style:{marginRight:10},children:"Edit Alert"}),Object(w.jsx)(_.a,{onClick:function(){var t=e.alerts.find((function(t){return e.row.id===t.id}));e.setAlerts(e.alerts.filter((function(e){return e!==t}))),e.displayDialogHandler(!1)},variant:"secondary",children:"Delete Alert"})]})]})})}));var se={setAlerts:x,sendReport:function(e,t){return function(){var n=Object(b.a)(d.a.mark((function n(r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f.a.post("/add-report",{alerts:e,reporter:t}).then((function(e){r({type:"send_report"})})).catch((function(e){console.log(e)}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},ie=Object(l.b)((function(e){return{alerts:e.alertsData,user:e.User}}),se)((function(e){var t=Object(r.useState)(null),n=Object(D.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(D.a)(s,2),o=i[0],l=i[1],u=0,j=(Object(r.useRef)(null),function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setAlerts([]);case 2:e.sendReport(e.alerts,e.user?e.user.given_name+" "+e.user.family_name:"NOC");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),h=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Q.Button,{style:{marginRight:10},label:"Submit report!",className:"p-button-success",onClick:j}),Object(w.jsx)(Q.Button,{label:"Clear",className:"p-button-danger",onClick:Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setAlerts([]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))})]});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(J.DataTable,{stripedRows:!0,selectionMode:"single",onSelectionChange:function(t){c(e.alerts.find((function(e){return t.value.id===e.id}))),l(!0)},footer:0!=e.alerts.length?h:void 0,value:e.alerts.map((function(e){return{id:u++,alert:e.title,environment:e.environment,type:e.type}})),children:[Object(w.jsx)(Y.Column,{field:"alert",header:"Alert title"}),Object(w.jsx)(Y.Column,{field:"environment",header:"Environment"}),Object(w.jsx)(Y.Column,{field:"type",header:"Type"}),Object(w.jsx)(Y.Column,{style:{textAlign:"center",width:"8em"}})]}),Object(w.jsx)(T.Dialog,{visible:o,style:{width:"90vw"},onHide:function(){return l(!1)},children:a&&Object(w.jsx)(ce,{row:a,displayDialogHandler:l})})]})})),oe=(n(214),{id:0,title:"",content:"",calledEmployee:"",time:void 0,environment:void 0});var le={setAlerts:x},ue={marginBottom:5},je=Object(l.b)((function(e){return{alertsData:e.alertsData}}),le)((function(e){var t=Object(r.useState)(oe),n=Object(D.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(0),i=Object(D.a)(s,2),l=i[0],u=i[1],j=(new Date).toLocaleString("en-US",{timeZone:"Asia/Jerusalem"});Object(r.useEffect)((function(){c(Object(o.a)(Object(o.a)({},a),{},{id:l,time:j}))}),[l]);var d=function(e){"title"===e.target.name?c(Object(o.a)(Object(o.a)({},a),{},{title:e.target.value})):"call"===e.target.name?c(Object(o.a)(Object(o.a)({},a),{},{calledEmployee:e.target.value})):c(Object(o.a)(Object(o.a)({},a),{},{content:e.target.value,time:j}))},b=function(t){if(""!==a.title&&a!==oe){switch(a.environment){case void 0:return void alert("You must insert an environement!");default:t?e.setAlerts([].concat(Object(ee.a)(e.alertsData),[Object(o.a)(Object(o.a)({},a),{},{type:"Alert"})])):e.setAlerts([].concat(Object(ee.a)(e.alertsData),[Object(o.a)(Object(o.a)({},a),{},{type:"Follow"})])),u((function(e){return e+1}))}console.log(e.alertsData),document.querySelectorAll("textarea").forEach((function(e){return e.value=""})),c(oe)}else alert("You must insert a title and an environemnet!")};return Object(w.jsxs)("div",{children:[Object(w.jsxs)(E.a,{style:{width:"100%"},children:[Object(w.jsx)(F.a,{style:ue,children:"Alert:"}),Object(w.jsx)(F.a,{style:ue,children:Object(w.jsx)(M.a,{children:Object(w.jsx)(L.a.Control,{as:"textarea",name:"title",style:{height:120},onChange:d})})}),Object(w.jsx)(F.a,{style:ue,children:"Alert info:"}),Object(w.jsx)(F.a,{style:ue,children:Object(w.jsx)(M.a,{children:Object(w.jsx)(L.a.Control,{as:"textarea",name:"content",style:{height:100},onChange:d})})}),Object(w.jsx)(F.a,{style:ue,children:"In case you made a call, enter the name of the employee you called:"}),Object(w.jsx)(F.a,{style:ue,children:Object(w.jsx)(M.a,{children:Object(w.jsx)(L.a.Control,{as:"textarea",name:"call",onChange:d})})}),Object(w.jsx)(F.a,{style:ue,children:"Chosen environement:"}),Object(w.jsx)(F.a,{style:ue,children:Object(w.jsx)(L.a.Control,{type:"text",placeholder:a.environment,readOnly:!0})}),Object(w.jsxs)(F.a,{style:ue,children:[Object(w.jsxs)(te.a,{title:"Environment",style:{marginRight:30},variant:"info",children:[Object(w.jsx)(ne.a.Item,{onSelect:function(){return c(Object(o.a)(Object(o.a)({},a),{},{environment:"production"}))},children:"Production"}),Object(w.jsx)(ne.a.Item,{onSelect:function(){return c(Object(o.a)(Object(o.a)({},a),{},{environment:"staging"}))},children:"Staging"})]}),Object(w.jsx)(_.a,{style:{marginRight:30},onClick:function(){return b(!0)},variant:"info",children:"Add Alert"}),Object(w.jsx)(_.a,{onClick:function(){return b(!1)},variant:"info",children:"Add Follow"})]})]}),Object(w.jsx)(ie,{alertsArray:e.alertsData})]})})),de=n(108),be=n(134),he=n(46),fe=n(135),Oe=n(267),ge=n(127),pe=n(109),xe=function e(t,n,r){Object(pe.a)(this,e),this.title=t,this.content=n,this.responder=r},me=function(e){var t=[];return t=t.concat(e.production.alerts?e.production.alerts:[],e.production.follows?e.production.follows:[],e.staging.alerts?e.staging.alerts:[],e.staging.follows?e.staging.follows:[])},ve=(n(218),function(e){return e?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("b",{children:[e.title," - ",e.time]}),Object(w.jsx)("p",{children:e.content}),e.calledEmployee&&Object(w.jsxs)("i",{children:["A call was made to ",Object(w.jsx)("b",{children:e.calledEmployee})]})]}):void 0}),ye=function(e){return e?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("p",{children:e.content})}):void 0},we=function(e){return e?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(be.Divider,{align:"left",children:Object(w.jsxs)("b",{children:[e.responder," - ",e.title]})}),Object(w.jsx)("p",{children:e.content})]}):void 0},Ce={updateComments:m,getReports:p},Se=Object(l.b)((function(e){return{user:e.User,reportsData:e.ReportsData}}),Ce)((function(e){var t=Object(r.useState)(""),n=Object(D.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(D.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(!1),j=Object(D.a)(u,2),d=j[0],b=j[1];return Object(r.useEffect)((function(){console.log("a")}),[b,d,Oe.a]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h3",{children:["Report ID: ",e.row.id]}),Object(w.jsx)("div",{className:"production-container",children:Object(w.jsxs)("div",{style:{marginLeft:8},children:[Object(w.jsx)("h4",{children:"Production:"}),Object(w.jsx)("h6",{children:"Alerts:"}),Object(w.jsx)(he.Carousel,{value:e.row.production.alerts,itemTemplate:ve,numVisible:1}),Object(w.jsx)("hr",{}),Object(w.jsx)("h6",{children:"To Follow:"}),Object(w.jsx)(he.Carousel,{value:e.row.production.follows,itemTemplate:ye,numVisible:1})]})})," ",Object(w.jsx)("div",{className:"staging-container",children:Object(w.jsxs)("div",{style:{marginLeft:8},children:[Object(w.jsx)("h4",{children:"Staging:"}),Object(w.jsx)("h6",{children:"Alerts:"}),Object(w.jsx)(he.Carousel,{value:e.row.staging.alerts,itemTemplate:ve,numVisible:1}),Object(w.jsx)("hr",{}),Object(w.jsx)("h6",{children:"To Follow:"}),Object(w.jsx)(he.Carousel,{value:e.row.staging.follows,itemTemplate:ye,numVisible:1})]})}),d?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(Oe.a,{animation:"border",role:"status",children:Object(w.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{style:{marginLeft:8},children:[Object(w.jsx)("h6",{children:"Comments:"}),Object(w.jsx)(he.Carousel,{value:e.row.comments,itemTemplate:we,numVisible:1}),Object(w.jsx)(M.a,{children:Object(w.jsx)(fe.Dropdown,{value:a,options:me(e.row).map((function(e){return e.title})),onChange:function(e){return c(e.value)},style:{width:"91%",marginBottom:"0.1%"},placeholder:"Select an alert/follow"})}),Object(w.jsxs)(M.a,{children:[Object(w.jsx)(ge.a,{as:"textarea",name:"Content",placeholder:"Write here the comment",style:{height:120},onChange:function(e){"Alert"===e.target.name?c(e.target.value):l(e.target.value)}}),Object(w.jsx)(_.a,{variant:"outline-secondary",id:"button-addon2",onClick:function(){b(!0),e.updateComments(e.row.id,new xe(a,o,e.user?e.user.name:localStorage.getItem("name"))),e.getReports(),b(!1)},children:"Submit Comment"})]})]})})]})})),De=(n(219),Object(l.b)((function(e){return{reportsData:e.ReportsData}}),{})((function(e){var t=Object(r.useState)(null),n=Object(D.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(D.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)(""),d=Object(D.a)(j,2),b=d[0],h=d[1],f=Object(r.useState)(""),O=Object(D.a)(f,2),g=O[0],p=O[1];Object(r.useEffect)((function(){var e,t=document.getElementsByClassName("p-selectable-row"),n=Object(de.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;console.log(r.getElementsByTagName("td")[0].innerHTML),""===r.getElementsByTagName("td")[0].innerHTML?r.style.display="none":r.style.display=""}}catch(a){n.e(a)}finally{n.f()}}),[e.tableData,g]);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.DataTable,{paginator:!0,rows:10,stripedRows:!0,selectionMode:"single",onSelectionChange:function(e){c(e.value),u(!0)},value:e.tableData.map((function(e){if(me(e).filter((function(e){return e.title.toUpperCase().includes(g.toUpperCase())})).length>0)return Object(o.a)({id:e._id,reporter:e.reporter,date:e.time},e)})),header:Object(w.jsx)("div",{className:"table-header",children:Object(w.jsxs)("span",{className:"p-input-icon-right",children:[Object(w.jsx)("i",{className:"pi pi-search"}),Object(w.jsx)($.InputText,{type:"search",onInput:function(e){return h(e.target.value)},placeholder:"Global search",style:{marginRight:10}}),Object(w.jsx)($.InputText,{type:"search",onInput:function(e){return p(e.target.value)},placeholder:"Alert search"})]})}),globalFilter:b,children:e.headers.map((function(e){return Object(w.jsx)(Y.Column,{field:e,sortable:!0,header:e.toUpperCase()})}))}),Object(w.jsx)(T.Dialog,{visible:l,style:{width:"90vw"},onHide:function(){return u(!1)},children:a&&Object(w.jsx)(Se,{row:a})})]})})));var ke={getReports:p,updateComments:m},Ae=Object(l.b)((function(e){return{reportsData:e.ReportsData}}),ke)((function(e){return Object(r.useEffect)((function(){e.getReports()}),[e.updateComments]),console.log(e.reportsData),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(De,{headers:["id","reporter","date"],tableData:e.reportsData})})})),Ne=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r,a,c,s,i,o,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:45,a={morning:0,noon:0,night:0,fridayMorning:0,fridayNoon:0},c=0,s=0,e.next=6,f.a.get("/get-user-shifts/".concat(t)).then((function(e){r=e.data,console.log(r)})).catch((function(e){console.log(e)}));case 6:for(i=(new Date).getMonth(),r=r.filter((function(e){return new Date(e.end).getMonth()===i&&new Date(e.end).getDay()<24&&new Date(e.end).getDay()>=1||new Date(e.end).getMonth()===i-1&&new Date(e.end).getDay()>=25})),console.log(r),o=0;o<r.length;o++)s+=Math.abs(Date.parse(r[o].end)-Date.parse(r[o].start))/36e5,c+=Ue(r[o].start,r[o].end,n,a);return e.abrupt("return",{totalHours:s,salary:c,hoursCounter:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(e,t,n,r){var a=new Date(e),c=new Date(t),s=!1,i=Math.abs(c.getTime()-a.getTime())/36e5;console.log(i);var o=0,l=0;i>8&&(l=i-8);var u=1,j=a.getHours();for(console.log(j);j<i+a.getHours()-l;j++,u++)6===a.getDay()?j>7&&j<=15?(o+=1.25*n,s||(r.fridayMorning+=i,s=!0)):j>15&&j<=23&&(o+=1.5*n,s||(r.fridayNoon+=i,s=!0)):j>=23||j<7?(o+=1.5*n,s||(r.night+=i,s=!0)):(o+=n,j>=7&&j<15&&!s?(r.morning+=i,s=!0):s||(r.noon+=i,s=!0));return u>8&&u<=10?o+=1.25*n*l:u>10&&u<=12&&(o+=1.25*n*2+1.5*n*(l-2)),o},Ie=n(136),Re=n.n(Ie),Te=Object(l.b)((function(e){return{user:e.User}}),{})((function(e){var t=Object(r.useState)(0),n=Object(D.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)({}),o=Object(D.a)(i,2),l=o[0],u=o[1],j=Object(r.useState)(!1),h=Object(D.a)(j,2),f=h[0],O=h[1],g=a.a.createRef();Object(r.useEffect)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,Ne(sessionStorage.getItem("name"),c);case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)}))),[c]);var p=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=6;break}return e.next=3,parseInt(t.target.value);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=0;case 7:return n=e.t0,e.next=10,s(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(E.a,{children:[Object(w.jsx)("h5",{children:"Enter your hourly salary:"}),Object(w.jsx)(ge.a,{value:c,onChange:p,style:{width:"30%",marginBottom:"1%",marginTop:"1%"}}),l.hoursCounter?Object(w.jsx)("div",{style:{border:"2px solid black",width:"40%"},children:Object(w.jsxs)("div",{style:{marginLeft:"1%"},children:[Object(w.jsxs)("h5",{children:["Current Salary: ",l.salary]}),Object(w.jsxs)("div",{ref:g,children:[f&&Object(w.jsx)("h2",{children:sessionStorage.getItem("name")+" report "+(new Date).toLocaleString()}),Object(w.jsxs)("h5",{children:["Total Hours: ",l.totalHours]}),Object(w.jsxs)("h5",{children:["Morning hours: ",l.hoursCounter.morning]}),Object(w.jsxs)("h5",{children:["Noon hours: ",l.hoursCounter.noon]}),Object(w.jsxs)("h5",{children:["night hours: ",l.hoursCounter.night]}),Object(w.jsxs)("h5",{children:["Friday morning hours: ",l.hoursCounter.fridayMorning]}),Object(w.jsxs)("h5",{children:["Friday noon hours: ",l.hoursCounter.fridayNoon]})]})]})}):Object(w.jsx)("h5",{children:"Loading..."}),Object(w.jsx)("div",{style:{marginTop:10},children:Object(w.jsx)(Re.a,{targetRef:g,filename:"".concat(sessionStorage.getItem("name")," report.pdf"),x:.5,y:.5,scale:.8,children:function(e){var t=e.toPdf;return Object(w.jsx)(_.a,{onClick:function(){t(),O(!0),setTimeout((function(){return O(!1)}),2e3)},variant:"info",children:"Generate Report to PDF"})}})})]})})}));var Ee={setUser:O},Fe=Object(l.b)((function(e){return{User:e.User}}),Ee)((function(e){var t=Object(r.useState)(""),n=Object(D.a)(t,2),a=n[0],c=n[1],s=(Object(u.f)(),function(){switch(a){case"Shifts":return Object(w.jsx)(q,{});case"Reports":return Object(w.jsx)(Ae,{});case"CreateReport":return Object(w.jsx)(je,{});case"Users":return Object(w.jsx)(X,{});case"Salary":return Object(w.jsx)(Te,{});default:return Object(w.jsx)("div",{children:Object(w.jsx)(q,{})})}});return Object(w.jsxs)("div",{className:"",children:[Object(w.jsxs)("div",{className:"fixed w-1/12 left-0 h-full text-center shadow-lg",children:[Object(w.jsx)("img",{src:k}),Object(w.jsxs)("ul",{className:"space-y-2 p-2 mt-12",children:[Object(w.jsx)("li",{children:Object(w.jsx)(_.a,{className:"btn btn-light",onClick:function(){c("Shifts")},children:"Shifts"})}),Object(w.jsx)("li",{children:Object(w.jsx)(_.a,{className:"btn btn-light",onClick:function(){c("Reports")},children:"Reports"})}),Object(w.jsx)("li",{children:Object(w.jsx)(_.a,{className:"btn btn-light",onClick:function(){c("CreateReport")},children:"Create Report"})}),Object(w.jsx)("li",{children:Object(w.jsx)(_.a,{className:"btn btn-light",onClick:function(){c("Users")},children:"Users"})}),Object(w.jsx)("li",{children:Object(w.jsx)(_.a,{className:"btn btn-light",onClick:function(){c("Salary")},children:"Salary Stats"})})]})]}),Object(w.jsxs)("div",{className:"ml-40 h-full w-11/12",children:[Object(w.jsx)("div",{style:{backgroundColor:"#5D737E"},className:"h-12 shadow-md"}),Object(w.jsx)("div",{className:"p-1",children:Object(w.jsx)(s,{})})]})]})})),He=function(){return Object(w.jsx)(Fe,{})},Me={setUser:O},Le=Object(l.b)((function(e){return{}}),Me)((function(e){var t=Object(v.d)().oktaAuth,n=Object(v.d)().authState;return n.isPending?Object(w.jsx)("div",{children:"Loading..."}):(n.isAuthenticated&&t.getUser().then((function(t){console.log(t),e.setUser(t),sessionStorage.setItem("email",t.email),sessionStorage.setItem("name",t.name)})),n.isAuthenticated?Object(w.jsx)(u.a,{to:He}):t.signInWithRedirect())})),_e=Object(l.b)((function(e){return{}}),{})((function(e){var t=Object(u.f)(),n=new y.OktaAuth({issuer:"https://accessfintechinternal.okta.com",clientId:"0oa3rf7k1vkGwQ8or4x7",redirectUri:window.location.origin+"/login/callback",onAuthRequired:function(){t.push("/login")},pkce:!0});return Object(w.jsxs)(v.c,{oktaAuth:n,children:[Object(w.jsx)(u.b,{path:"/",exact:!0,component:S}),Object(w.jsx)(u.b,{path:"/changes/:id",render:function(e){return Object(w.jsx)(S,Object(o.a)({},e))}}),Object(w.jsx)(v.b,{path:"/protected",component:He}),Object(w.jsx)(u.b,{path:"/login",render:function(){return Object(w.jsx)(Le,{})}}),Object(w.jsx)(u.b,{path:"/login/callback",component:v.a})]})}));n(252),n(253),n(254),n(255);var Be={getUsers:g},Pe=Object(l.b)((function(e){return{User:e.User}}),Be)((function(e){var t=function(e){e.returnValue="Are you sure you want to leave?"};return Object(r.useEffect)((function(){window.addEventListener("beforeunload",t)})),Object(w.jsx)(i.a,{children:Object(w.jsx)(_e,{})})})),Ge=n(56);function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var We=Object(Ge.b)("counter/fetchCount",function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),qe=Object(Ge.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(We.pending,(function(e){e.status="loading"})).addCase(We.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Je=qe.actions,Ye=(Je.increment,Je.decrement,Je.incrementByAmount,qe.reducer),Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_user":return t.user;default:return e}},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_users":return t.list;default:return e}},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_shifts":return t.shifts;default:return e}},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_reports":return t.reports;default:return e}},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_alerts":return t.alertsData;default:return e}},Xe=Object(Ge.a)({reducer:{counter:Ye,User:Qe,Users:Ze,ReportsData:ze,Shifts:$e,alertsData:Ke}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(l.a,{store:Xe,children:Object(w.jsx)(Pe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[256,1,2]]]);
//# sourceMappingURL=main.8725a0ba.chunk.js.map